- 스프링 시큐리티(Spring Security)는 막강한 인증(Autentication)과 인가(Authorization)(혹은 권한 부여) 기능을 가진 프레임워크임
- 사실상 스프링 기반의 애플리케이션에서는 보안을 위한 표준이라고 보면 됨
- 인터셉터, 필터 기반의 보안 기능을 구현하는 것보다 스프링 시큐리티를 통해 구현하는 것을 적극적으로 권장하고 있음
- 스프링의 대부분 프로젝트들(MVC, Data, Batch 등)처럼 확장성을 고려한 프레임워크이다 보니 다양한 요구사항을 손쉽게 추가하고 변경할 수 있음
- 이런 손쉬운 설정은 특히나 스프링 부트 1.5에서 2.0으로 넘어오면서 더욱 더 강력해졌음
- 이번 파트에서는 스플이 시큐리티와 OAuth 2.0을 구현한 구글 로그인을 연동하여 로그인 기능을 만들어 보겠음

## 구글 서비스 등록
- 먼저 구글 서비스에 신규 서비스를 생성함
- 여기서 발급된 인증 정보(clientId와 clientSecret)를 통해서 로그인 기능과 소셜 서비스 기능을 사용할  수 있으므로 반드시 발급을 받고 시작해야 함
- 구글 클라우드 플랫폼 주소(https://console.cloud.google.com/)로 이동하여 왼쪽 상단 `프로젝트 선택` 탭을 클릭하고 `새 프로젝트 선택` 버튼을 클릭
- 등록될 서비스의 이름을 입력(여기서는 '`test-springboot-webservice`'로 지음)
- 생성이 완료된 프로젝트를 선택하고 왼쪽 상단 `메뉴 탭`을 클릭해서 `API 및 서비스` 카테고리로 이동
<img src="https://user-images.githubusercontent.com/77138259/229974288-95be7adf-bbd9-465f-9aeb-8bfc66e148e4.png" alt="설정 페이지 이동" />

- 왼쪽 사이드바에서 `사용자 인증 정보`를 클릭하고 `사용자 인증 정보 만들기` 버튼을 클릭
- `사용자 인증 정보`에는 여러 메뉴가 있는데 이 중 이번에 구현할 소셜 로그인은 `OAuth 클라이언트 ID`로 구현하므로 해당 항목 클릭
- 바로 클라이언트 ID가 생성되기 전에 동의 화면 구성이 필요하므로 안내에 따라 `동의 화면 구성` 버튼을 클릭함
- OAuth 동의 화면에서 `외부`를 클릭하고 만들기 버튼 클릭
- 다음과 같이 항목 작성 후 저장
	- 애플리케이션 이름: 구글 로그인 시 사용자에게 노출될 애플리케이션 이름. 여기서는 'test-springboot-webservice'로 작성
	- 지원 이메일: 사용자 동의 화면에 노출될 이메일 주소. 보통은 서비스의 help 이메일 주소를 사용하지만, 여기서는 독자의 이메일 주소를 사용함
	- Google API의 범위: 이번에 등록할 구글 서비스에서 사용할 범위 목록. `범위 추가 또는 삭제` 버튼틀 클릭해서 기본 범위인 `email`, `profile`, `openid`만을 사용. 이외 다른 정보들도 사용하고 싶다면 추가 체크함
- 다시 `사용자 인증 정보`로 돌아가 `사용자 인증 정보 만들기` → `OAuth 클라이언트 ID`를 클릭
- 애플리케이션 유형을 선택하라고 뜨면 `웹 애플리케이션` 선택
- 아래 `승인된 리디렉션 URI` 항목의 `URI 추가` 버튼을 클릭 후, 'http://localhost:8080/login/oauth2/code/google' 추가

>승인된 리디렉션 URI
>- 서비스에서 파라미터로 인증 정보를 주었을 때 인증이 성공하면 구글에서 리다이렉트할 URL임
>- 스프링 부트 2 버전의 시큐리티에서는 기본적으로 `{도메인}/login/oauth2/code/{소셜서비스코드}`로 리다이렉트 URL을 지원하고 있음
>- 사용자가 별도로 리다이렉트 URL을 지원하는 Controller를 만들 필요가 없음. 시큐리티에서 이미 구현해 놓은 상태임
>- 현재는 개발 단계이므로 'http://localhost:8080/login/oauth2/code/google'로만 등록함
>- AWS 서버에 배포하게 되면 localhost 외에 추가로 주소를 추가해야하며, 이건 이후 단계에서 진행하겠음

- `만들기` 버튼을 클릭하면 생성된 클라이언트 정보를 볼 수 있고 생성된 애플리케이션을 클릭하면 인증 정보를 볼 수 있음
- `이제 클라이언트 ID`와 `클라이언트 보안 비밀` 코드를 프로젝트에서 설정해보자
