# 1. 애플리케이션 설명
- 지금까지 정리한 내용을 토대로 웹 애플리케이션을 만들겠음(OX Quiz)
- 'OX Quiz'란 제출된 퀴즈에 대해서 O 혹은 X로 대답하는 퀴즈임

### 1) 기능 목록
- 1~4번 기능은 CRUD 처리
- 5번 기능은 등록한 퀴즈를 무작위로 표시하고 답하는 기능
- 작성할 기능 목록

|**No**|**기능**|**설명**|
|---|---|---|
| 1 | 등록 기능 | 퀴즈를 등록함 |
| 2 | 갱신 기능 | 등록된 퀴즈를 갱신함 |
| 3 | 삭제 기능 | 등록된 퀴즈를 삭제함 |
| 4 | 목록 표시 기능 | 등록된 퀴즈의 목록을 표시함 |
| 5 | 게임 기능 | 퀴즈 게임을 실시함 |

- URL 목록

|**No**|**역할**|**HTTP 메서드**|**URL**|
|---|---|---|---|
| 1 | 퀴즈 목록을 표시함 | GET | /quiz |
| 2 | 등록 처리를 실행함 | POST | /quiz/insert |
| 3 | 갱신 화면을 표시함 | GET | /quiz/{id} |
| 4 | 갱신 처리를 실행함 | POST | /quiz/update |
| 5 | 삭제 처리를 실행함 | POST | /quiz/delete |
| 6 | 퀴즈 화면을 표시함 | GET | /quiz/play |
| 7 | 퀴즈 답을 체크함 | POST | /quiz/check |

### 2) 예제 애플리케이션의 레이어
- OX Quiz 애플리케이션은 다음 세 개의 레이어로 나뉨
	- 애플리케이션 레이어
	- 도메인 레이어
	- 인프라스트럭처 레이어
- MVC 모델에서는 업무 기능이나 취급하는 데이터의 처리 요건이 복잡해지면 비즈니스 로직 처리를 담당하는 모델(Model: M) 부분이 많아져서 '모델의 비대화'라는 문제가 발생함
- MVC 모델은 설계 개념상 모델이 담당하는 부분 자체를 줄이는 것은 안 되기 때문에 모델 안에서 역할 분담을 명확하게 하고 애플리케이션의 레이어 구성을 적용하고 비대해지는 모델을 분할하는 것이 레이어를 나누는 목적임
- 각 레이어는 아래 그림에 표시된 구성 요소(컴포넌트)가 포함됨

<img src="https://user-images.githubusercontent.com/77138259/229412240-a34155fe-3aeb-4138-9583-5bd8376b0b39.png" alt="레이어별 컴포넌트" />
<p style="margin:0" align="right"><a href="https://wikibook.co.kr/spring/">출처: 스프링 프레임워크 첫걸음(위키북스)</a></p>

- 애플리케이션 레이어: 클라이언트에서 받은 요청을 제어하고 도메인 레이어를 사용하여 애플리케이션을 제어함
- 도메인 레이어: 도메인 객체에 대해 애플리케이션의 서비스 처리를 실행함
- 인프라스트럭처 레이어: 도메인 객체에 대해 CRUD 조작을 해서 데이터의 영속화(데이터를 영구 저장하는)를 담당함

- 레이어를 나누는 엄격한 규칙으로서 애플리케이션 레이어도 인프라스트럭처 레이어도 도메인 레이어에 의존하지만 도메인 레이어는 다른 레이어에 의존해서는 안 된다는 규칙이 있음
- 즉, 도메인 레이어의 변경에 의해 '애플리케이션 레이어'의 변경은 허용하지만 애플리케이션 레이어의 변경으로 도메인 레이어의 변경이 발생해서는 안 된다는 것임

### 3) 레이어별 컴포넌트 설명
1. 애플리케이션 레이어
-  Controller: 요청을 처리에 매핑하고 결과를 뷰에 넘겨주는 제어를 함. 주요 처리는 Controller 안에서 실행하지 않고 '도메인 레이어'의 Service를 호출함
- Form: 화면의 폼을 표현함. 화면에서 입력한 값을 Controller에 넘겨줌. 또한 Controller에서 화면에 결과를 출력할 때도 사용함. 도메인 레이어가 애플리케이션 레이어에 의존하지 않도록 Form에서 도메인 객체로 변환하거나 도메인 객체에서 Form으로 변환하는 것을 애플리케이션 레이어에서 수행해야 함
- View: 화면 표시를 담당함

2. 도메인 레이어
- 도메인 객체: 서비스 처리를 실행할 때 필요한 자원임(Entity 등)
- Service: 애플리케이션의 서비스 처리를 담당함
- Repository: Repository는 인터페이스임. 데이터베이스의 데이터 조작 내용만 정의함(구현 내용은 작성하지 않음)

3. 인프라스트럭처 레이어
- Repositorylmpl: 도메인 레이어에서 정의한 Repository의 구현 클래스임. 'O/R Mapper'가 Repository의 구현 클래스를 생성하는 경우도 있음
- O/R Mapper: O(Object; 객체)와 R(Relational; 관계형 데이터베이스) 간의 데이터를 매핑함

### 4) 생성할 컴포넌트 목록

|**No**|**레이어**|**컴포넌트**|**이름**|**비고**|
|---|---|---|---|---|
| 1 | 애플리케이션 레이어 | View | - | 화면 표시 |
| 2 | 애플리케이션 레이어 | Controller | QuizController | 제어 역할 담당 |
| 3 | 애플리케이션 레이어 | Form | QuizForm | 화면의 게임 폼을 표현 |
| 4 | 도메인 레이어 | Service | QuizService | 인터페이스로 생성 |
| 5 | 도메인 레이어 | ServiceImpl | QuizServiceImpl | Service를 구현 |
| 6 | 도메인 레이어 | 도메인 객체 | Quiz | 엔티티 역할 |
| 7 | 도메인 레이어 | Repository | QuizRepository | 인터페이스로 생성 |
| 8 | 인프라스트럭처 레이어 | RepositoryImpl | - | O/R Mapper로 자동 생성 |
| 9 | 인프라스트럭처 레이어 | O/R Mapper | - | 스프링 데이터 JDBC를 사용 |

# 2. OX Quiz용 데이터베이스 생성
### 1) 데이터베이스 생성
- pgAdmin 4를 실행
- 왼쪽 창에서 `Server => PostgreSQL xx => Databases` 선택 후, 마우스 오른쪽 버튼을 클릭해서 `Create → Database`를 선택
- 